name: bitstamp
terms:
  terms_url: https://www.bitstamp.net/terms-of-use/ltd
  permission: false
  search_targets:
  - tag: div
    class: content terms-of-use
api_url: https://www.bitstamp.net/api/v2/
rate_limit:
  max: 600
  # 10 minutes
  unit: 600
requests:
  currency_pairs:
    request:
      template: trading-pairs-info/
      values: null
      params: null
    response:
      type: list
      values:
        type: dict
        values:
          base_decimals:
            type: int
          minimum_order:
            type: str
          name: # e.g. LTC/USD
            type: str
          counter_decimals:
            type: int
          trading:
            type: str
          url_symbol: # e.g. ltcusd
            type: str
          description: # e.g. Litecoin / U.S. dollar
            type: str
    mapping:
    - key: currency_pair_first
      path:
      - name
      - 0
      type:
      - str
      - split
      - "/"
      - 0
    - key: currency_pair_second
      path:
      - name
      - 1
      type:
      - str
      - split
      - "/"
      - 1

  ticker:
    request:
      template: ticker/{currency_pair}/
      pair_template: # e.g. btcusd
        template: "{first}{second}"
        lower_case: true
      params: null
    response:
      type: dict
      values:
        last:
          type:
          - str
          - float
        high:
          type:
          - str
          - float
        low:
          type:
          - str
          - float
        vwap:
          type:
          - str
          - float
        volume:
          type:
          - str
          - float
        bid:
          type:
          - str
          - float
        ask:
          type:
          - str
          - float
        timestamp:
          type:
          - str
          - int
          - fromtimestamp
        open:
          type:
          - str
          - float
    mapping:
    - key: currency_pair_first
      path: []
      type:
        - first_currency
    - key: currency_pair_second
      path: []
      type:
        - second_currency
    - key: ticker_last_price
      path:
      - last
      type:
      - str
      - float
    - key: ticker_daily_volume
      path:
      - volume
      type:
      - str
      - float
    - key: ticker_best_bid
      path:
      - bid
      type:
      - str
      - float
    - key: ticker_best_ask
      path:
      - ask
      type:
      - str
      - float
    - key: ticker_time
      path:
      - timestamp
      type:
      - str
      - int
      - fromtimestamp

  historic_rates:
    request:
      template: ohlc/{currency_pair}/
      pair_template:
        template: '{first}{second}'
        lower_case: true
      params:
        step:
          type: int
          allowed:
            - 60
            - 180
            - 300
            - 900
            - 1800
            - 3600
            - 7200
            - 14400
            - 21600
            - 43200
            - 86400
            - 259200
          default: 21600
        limit:
          type: int
          default: 1000 #limit between 1 and 1000
    response:
      type: dict
      values:
        data:
          type: dict
          values:
            pair:
              - str
            ohlc:
              type: list
              values:
                high:
                  - str
                  - float
                timestamp:
                  - str
                  - int
                  - fromtimestamp
                volume:
                  - str
                  - float
                low:
                  - str
                  - float
                open:
                  - str
                  - float
                close:
                  - str
                  - float
    mapping:
      - key: open
        path:
          - data
          - ohlc
          - open
        type:
          - str
          - float
      - key: historic_rates_close
        path:
          - data
          - ohlc
          - close
        type:
          - str
          - float
      - key: historic_rates_high
        path:
          - data
          - ohlc
          - high
        type:
          - str
          - float
      - key: historic_rates_close
        path:
          - data
          - ohlc
          - close
        type:
          - str
          - float
      - key: historic_rates_volume
        path:
          - data
          - ohlc
          - volume
        type:
          - str
          - float
      - key: historic_rates_time
        path:
          - data
          - ohlc
          - timestamp
        type:
          - str
          - int
          - fromtimestamp

  # order_book:
    # request:
      # template: order_book/{currency_pair}
      # pair_template: # e.g. btcusd
        # template: "{first}{second}"
        # lower_case: true
      # params:
        # group:
          # type: int
          # allowed:
          # - 0
          # - 1
          # - 2
          # default: 1
    # response:
      # type: dict
      # values:
        # timestamp:
          # type:
          # - str
          # - int
          # - fromtimestamp
        # bids:
          # type: list
          # values:
            # type: list
            # values:
              # 0: # price
                # type:
                # - str
                # - float
              # 1: # amount
                # type:
                # - str
                # - float
        # asks:
          # type: list
          # values:
            # type: list
            # values:
              # 0: # price
                # type:
                # - str
                # - float
              # 1: # amount
                # type:
                # - str
                # - float
    # mapping:
    # - key: order_book_time
      # path:
      # - timestamp
      # type:
      # - str
      # - int
      # - fromtimestamp
    # - key: order_book_bids_price
      # path:
      # - bids
      # - 0
      # type:
      # - str
      # - float
    # - key: order_book_bids_size
      # path:
      # - bids
      # - 1
      # type:
      # - str
      # - float
    # - key: order_book_asks_price
      # path:
      # - asks
      # - 0
      # type:
      # - str
      # - float
    # - key: order_book_asks_size
      # path:
      # - asks
      # - 1
      # type:
      # - str
      # - float

#  trades:
#    request:
#      template: transactions/{currency_pair}
#      pair_template: # e.g. btcusd
#        template: "{first}{second}"
#        lower_case: true
#      params:
#        time:
#          type: str
#          allowed:
#          - minute
#          - hour
#          - day
#          default: hour
#    response:
#      type: list
#      values:
#        type: dict
#        values:
#          date:
#            type:
#            - str
#            - int
#            - fromtimestamp
#          tid:
#            type:
#            - str
#            - int
#          price:
#            type:
#            - str
#            - float
#          amount:
#            type:
#            - str
#            - float
#          type: # 0 (buy) or 1 (sell).
#            type:
#            - int
#            - str
#    mapping:
#    - key: trade_time
#      path:
#      - date
#      type:
#      - str
#      - int
#      - fromtimestamp
#    - key: trade_last_price
#      path:
#      - price
#      type:
#      - str
#      - float
#    - key: trade_amount
#      path:
#      - amount
#      type:
#      - str
#      - float
#    - key: trade_side
#      path:
#      - type
#      type:
#      - int
#      - str
#
#
