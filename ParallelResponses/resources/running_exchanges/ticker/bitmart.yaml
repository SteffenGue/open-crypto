name: bitmart
terms:
  terms_url: https://support.bitmart.com/hc/en-us/articles/115004890354-Terms-of-Use
  permission: null
  search_targets:
  - tag: section
    class: article-info
  - tag: div
    class: article-content
  - tag: div
    class: article-body
api_url: https://openapi.bitmart.com/v2/
rate_limit:
  max: 10 # 3-90
  unit: 60
requests:

  currency_pairs:
    request:
      template: symbols/
      pair_template: null
      params: null
    response:
      type: list
      values: # currency pairs e.g. BMX_ETH
        type: str
    mapping:
    - key: currency_pair_first
      path: 
      - []
      type:
      - str
      - split
      - "_"
      - 0
    - key: currency_pair_second
      path: 
      - []
      type:
      - str
      - split
      - "_"
      - 1
      
  currencies:
    request:
      template: currencies/
      pair_template: null
      params: null
    response:
      type: list
      values:
        type: dict
        values:
          id:
            type: str
          name:
            type: str
          withdraw_enabled:
            type: bool
          deposit_enabled:
            type: bool
    mapping:
    - key: currency_symbol
      path:
      - id
      type:
      - str
    - key: currency_name
      path:
      - name
      type:
      - str

  ticker:
    request:
      template: ticker
      pair_template: # e.g. BMX_ETH
        template: "{first}_{second}"
        lower_case: false
        alias: symbol
      params: null
    response:
      type: dict
      values:
        symbol_id:
          type:
            - str
        volume:
          type:
          - str
          - float
        base_volume:
          type:
          - str
          - float
        highest_price:
          type:
          - str
          - float
        lowest_price:
          type:
          - str
          - float
        current_price:
          type:
          - str
          - float
        ask_1:
          type:
          - str
          - float
        ask_1_amount:
          type:
          - str
          - float
        bid_1:
          type:
          - str
          - float
        bid_1_amount:
          type:
          - str
          - float
        fluctuation:
          type:
          - str
          - float
        url:
          type: str
    mapping:
    - key: currency_pair_first
      path:
        - symbol_id
      type:
        - str
        - split
        - '_'
        - 0
    - key: currency_pair_second
      path:
        - symbol_id
      type:
        - str
        - split
        - '_'
        - 1
    - key: ticker_time
      path: []
      type:
        - none
        - now
    - key: ticker_last_price
      path:
        - current_price
      type:
        - str
        - float
    - key: ticker_best_ask
      path:
        - ask_1
      type:
        - str
        - float
    - key: ticker_best_bid
      path:
        - bid_1
      type:
        - str
        - float
    - key: ticker_daily_volume
      path:
        - volume
      type:
        - str
        - float

  #TODO: funktioniert nicht, da requests mit mehr als 500 eintr√§gen nichgt returnt werden,
  # keine ahnung, wie sichergestellt werden kann, dass dieser fall nicht eintritt
  historic_rates:
    request:
      template: symbols/{currency_pair}/kline
      pair_template: # e.g. BMX_ETH
        template: "{first}_{second}"
        lower_case: false
      params:
        step: # in minutes
          type: int
          default: 1440 # 1d
        from: # in milliseconds
          type:
          - datetime
          - totimestampms
          required: true
          default: 1262300400000 # 01.01.2010
        to: # in milliseconds
          type:
          - datetime
          - totimestampms
          required: true
          default: 1577833200000 # 01.01.2020
    response:
      type: list
      values:
        type: dict
        values:
          timestamp:
            type:
            - int
            - fromtimestampms
          open_price:
            type:
            - str
            - float
          highest_price:
            type:
            - str
            - float
          lowest_price:
            type:
            - str
            - float
          current_price:
            type:
            - str
            - float
          volume:
            type:
            - str
            - float
    mapping:
    - key: historic_rates_time
      path:
      - timestamp
      type:
      - int
      - fromtimestampms
    - key: historic_rates_open
      path:
      - open_price
      type:
      - str
      - float
    - key: historic_rates_high
      path:
      - highest_price
      type:
      - str
      - float
    - key: historic_rates_low
      path:
      - lowest_price
      type:
      - str
      - float
    - key: historic_rates_volume
      path:
      - volume
      type:
      - str
      - float

  # order_book:
    # request:
      # template: symbols/{currency_pair}/orders
      # pair_template: # e.g. BMX_ETH
        # template: "{first}_{second}"
        # lower_case: false
      # params:
        # precision: # Price precision whose range is defined in symbol details
          # type: int
          # required: false
    # response:
      # type: dict
      # values:
        # buys:
          # type: list
          # values:
            # type: dict
            # values:
              # amount:
                # type:
                # - str
                # - float
              # total:
                # type:
                # - str
                # - float
              # price:
                # type:
                # - str
                # - float
              # count:
                # type:
                # - str
                # - int
        # sells:
          # type: list
          # values:
            # type: dict
            # values:
              # amount:
                # type:
                # - str
                # - float
              # total:
                # type:
                # - str
                # - float
              # price:
                # type:
                # - str
                # - float
              # count:
                # type:
                # - str
                # - int
    # mapping:
    # - key: order_book_time
      # path: []
      # type:
      # - none
      # - now
    # - key: order_book_bids_size
      # path:
      # - buys
      # - amount
      # type:
      # - str
      # - float
    # - key: order_book_bids_price
      # path:
      # - buys
      # - price
      # type:
      # - str
      # - float
    # - key: order_book_asks_size
      # path:
      # - sells
      # - amount
      # type:
      # - str
      # - float
    # - key: order_book_asks_price
      # path:
      # - sells
      # - price
      # type:
      # - str
      # - float

#  trades:
#    request:
#      template: symbols/{currency_pair}/trades/
#      pair_template: # e.g. BMX_ETH
#        template: "{first}_{second}"
#        lower_case: false
#      params: null
#    response:
#      type: list
#      values:
#        type: dict
#        values:
#          amount:
#            type:
#            - str
#            - float
#          order_time:
#            type:
#            - int
#            - fromtimestampms
#          price:
#            type:
#            - str
#            - float
#          count:
#            type:
#            - str
#            - float
#          type:
#            type: str
#    mapping:
#    - key: trade_amount
#      path:
#      - amount
#      type:
#      - str
#      - float
#    - key: trade_time
#      path:
#      - order_time
#      type:
#      - int
#      - fromtimestampms
#    - key: trade_last_price
#      path:
#      - price
#      type:
#      - str
#      - float
#    - key: trade_side
#      path:
#      - type
#      type:
#      - str
