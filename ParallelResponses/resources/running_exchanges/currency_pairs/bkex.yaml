#todo: exchange hat f√ºr ticker keine daten, die wir persistieren + doku im git ist auf chinesich
name: bkex
exchange: true
api_url: https://api.bkex.com

requests:
  currency_pairs:
    request:
      template: /v1/exchangeInfo
      pair_template: null
      params: null 
    response:
      type: dict
      values:
        msg: 
          type: str
        code: 
          type: str
        data: 
          type: dict
          values:
            coinTypes:
              type: list
              values:
                type: dict
                values:
                  coinType:
                    type: str
                  isSupportDeposit: 
                    type: bool
                  isSupportWithdraw:
                    type: bool
                  isSupportTrade:
                    type: bool
                  minWithdrawSingle:
                    type: int
                  maxWithdrawSingle:
                    type: int
                  maxWithdraweOneDay:
                    type: int
                  withdrawFww:
                    type: float
            pairs: 
              type: list
              values:
                type: dict
                values:
                  pair:
                    type: str
                  isSupportTrade: 
                    type: bool
                  pricePrecision:
                    type: int
                  amountPrecision:
                    type: int
                  minimumTradeAmount:
                    type: float
    mapping:
      - key: currency_pair_first
        path: 
        - data
        - pairs
        - pair
        type:
        - str
        - split
        - "_"
        - 0
      - key: currency_pair_second
        path:
        - data
        - pairs
        - pair
        type:
        - str
        - split
        - "_"
        - 1
  
  ticker:
    request:
      template: /v1/q/ticker/price
      pair_template: 
        template: "{first}_{second}"
        lower_case: false
        alias: pair
      params: null
    response:
      type: dict
      values:
        code:
          type: int
        data:
          type: list
          values:
            pair:
              type: str
            price:
              type: float
          msg:
            type: str
    mapping:
      - key: currency_pair_first
        path:
        - data
        - pair
        type:
        - str
        - split
        - "_"
        - 0
      - key: currency_pair_second
        path:
        - data
        - pair
        type:
        - str
        - split
        - "_"
        - 1
      - key: ticker_last_price
        path:
        - data
        - price
        type:
        - float
      - key: ticker_time
        path: []
        type:
        - none
        - now
              
  # ticker_24h:
    # request:
      # template:/v1/q/ticker
        # pair_template: 
        #   template: "{first}_{second}"
        #   lower_case: false
        #   alias: pair
      # params: null
    
    # response:
      # type: dict
      # values:
        # msg: 
          # type: str
        # code: 
          # type: bool
        # data:
          # type: dict
          # values:
            # pair: 
              # type: str
            # o: 
              # type: float
            # c:
              # type: float
            # h:
              # type: float
            # l:
              # type: float
            # a:
              # type: float
            # r:
              # type: int
    # mapping:
      # - key: currency_pair_first
        # path:
        # - data
        # - pair
        # type:
        # - str
        # - split
        # - "_"
        # - 0
      # - key: currency_pair_second
        # path:
        # - data
        # - pair
        # type:
        # - str
        # - split
        # - "_"
        # - 1
  
  historic_rates:
    request:
      template: /v1/q/kline
      pair_template: 
        template: "{first}_{second}"
        lower_case: false
        alias: pair
      params: 
        interval:
          type: 
          - str        
          allowed: null
          default: 1d
        size:
          type: 
          - int
          allowed: null
          default: 1000 

    response:
      type: dict
      values:
        msg: 
          type: str
        code:
          type: str
        data: 
          type: list
          values:
            type: dict
            values:
              t: # timestamp ms
                type: int
              c: # closing price
                type: float
              o: # opening price
                type: float
              h: # highest price
                type: float
              l: # lowest price
                type: float
              a: #trading amount
                type: float
    mapping:
      - key: historic_rates_time
        path:
        - data
        - t
        type:
        - int
        - fromtimestampms
      - key: historic_rates_low
        path:
        - data
        - l
        type:
        - float
      - key: historic_rates_high
        path:
        - data
        - h
        type:
        - float
      - key: historic_rates_open
        path:
        - data
        - o
        type:
        - float
      - key: historic_rates_close
        path:
        - data
        - c
        type:
        - float
