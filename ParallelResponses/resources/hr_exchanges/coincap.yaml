name: coincap
terms:
  # terms_url: https://static.coincap.io/documents/terms_of_service.pdf
  permission: true
  search_targets:
  - tag: div
    class: page
  - tag: div
    class: textLayer

# versions:
#   v1: # This API will be shut down on March 1, 2019, new API v2
#     api_url: http://coincap.io/
#     rate_limit: null
#     requests:
#       currencies:
#         request:
#           template: coins/
#           pair_template: null
#           params: null
#         response:
#           type: list
#           values: # each crypto currency
#             type: str
#         mapping:
#         - key: currency_symbol
#           path: []
#           type:
#           - str
#
#       front: # not required
#         request:
#           template: front/
#           values: null
#           params: null
#         response:
#           type: list
#           values:
#             type: dict
#             values:
#               cap24hrChange:
#                 type: float
#               long: # i.e. "Bitcoin"
#                 type: str
#               mktcap:
#                 type: float
#               perc:
#                 type: float
#               price:
#                 type: float
#               shapeshift:
#                 type: bool
#               short: # i.e. "BTC"
#                 type: str
#               supply:
#                 type: int
#               usdVolume:
#                 type: float
#               volume:
#                 type: float
#               vwapData:
#                 type: float
#               vwapDataBTC:
#                 type: float
#
#       page: # not required
#         request:
#           template: page/{crypto_currency}/
#           values:
#             crypto_currency: # e.g. BTC
#               template: "{str}"
#               lower_case: false
#           params: null
#         response:
#           type: dict
#           values:
#             altCap:
#               type: float
#             bitnodesCount:
#               type: int
#             btcCap:
#               type: float
#             btcPrice:
#               type: float
#             dom:
#               type: float
#             totalCap:
#               type: float
#             volumeAlt:
#               type: float
#             volumeBtc:
#               type: float
#             volumeTotal:
#               type: float
#             id:
#               type: str
#             _id:
#               type: str
#             cap24hrChange:
#               type: float
#             display_name:
#               type: str
#             status:
#               type: str
#             supply:
#               type: int
#             volume:
#               type: int
#             vwap_h24:
#               type: float
#             price_btc:
#               type: float
#             price_eth:
#               type: float
#             price_eur:
#               type: float
#             price_usd:
#               type: float
#             price_ltc:
#               type: float
#             price_zec:
#               type: float
#             market_cap:
#               type: float
#             type:
#               type: str
#             price:
#               type: float

#   v2:
api_url: https://api.coincap.io/v2/
rate_limit: null
requests:
  currencies:
    request:
      template: assets
      pair_template: null
      params:
        search: # e.g. search by asset id (bitcoin) or symbol (BTC)
          type: str
          default: bitcoin
        limit:
          type: int
          max: 2000
          default: 5
        offset:
          type: int
          default: 1
    response:
      type: dict
      values:
        data:
          type: list
          values:
            type: dict
            values:
              id: # e.g. bitcoin
                type: str
              rank:
                type:
                - str
                - int
              symbol: # e.g. BTC
                type: str
              name: # e.g. Bitcoin
                type: str
              supply:
                type:
                - str
                - float
              maxSupply:
                type:
                - str
                - float
              marketCapUsd:
                type:
                - str
                - float
              volumeUsd24Hr:
                type:
                - str
                - float
              priceUsd:
                type:
                - str
                - float
              changePercent24Hr:
                type:
                - str
                - float
              vwap24Hr:
                type:
                - str
                - float
    mapping:
    - key: currency_symbol
      path:
      - data
      - symbol
      type:
      - str
    - key: currency_name
      path:
      - data
      - name
      type:
      - str

  currency_pairs:
    request:
      template: markets
      pair_template: null
      params:
        exchangeId: # search by exchange Id
          type: str
          default: poloniex
        baseSymbol:
          type: str
          default: BTC
        quoteSymbol:
          type: str
          default: ETH
        baseId:
          type: str
          default: bitcoin
        quoteId:
          type: str
          default: ethereum
        assetSymbol:
          type: str
          default: BTC
        assetId:
          type: str
          default: bitcoin
        limit:
          type: int
          max: 2000
          default: 5
        offset:
          type: int
          default: 1
    response:
      type: dict
      values:
        data:
          type: list
          values:
            type: dict
            values:
              exchangeId:
                type: str
              rank:
                type:
                - str
                - int
              baseSymbol: # e.g. BTC
                type: str
              baseId: # e.g. bitcoin
                type: str
              quoteSymbol: # e.g. USD
                type: str
              quoteId: # e.g. united-states-dollar
                type: str
              priceQuote:
                type:
                - str
                - float
              priceUsd:
                type:
                - str
                - float
              volumeUsd24Hr:
                type:
                - str
                - float
              percentExchangeVolume:
                type:
                - str
                - float
              tradesCount24Hr:
                type:
                - str
                - int
              updated:
                type:
                - int
                - fromtimestamp
    mapping:
    - key: currency_pair_first
      path:
      - data
      - baseSymbol
      type:
      - str
    - key: currency_pair_second
      path:
      - data
      - quoteSymbol
      type:
      - str

  historic_rates:
    request:
      template: candles
      pair_template: null
      params:
        exchange: # e.g. poloniex
          type: str
          required: true
        interval:
          type: str
          allowed:
          - m1
          - m5
          - m15
          - m30
          - h1
          - h2
          - h4
          - h8
          - h12
          - d1
          - w1
          required: true
        baseId: # e.g. ethereum
          type: str
          required: true
        quoteId: # e.g. bitcoin
          type: str
          required: true
        start:
          type:
          - datetime
          - totimestampms
          required: false
        end:
          type:
          - datetime
          - totimestampms
          required: false
    response:
      type: dict
      values:
        data:
          type: list
          values:
            type: dict
            values:
              open:
                type:
                - str
                - float
              high:
                type:
                - str
                - float
              low:
                type:
                - str
                - float
              close:
                type:
                - str
                - float
              volume:
                type:
                - str
                - float
              period:
                type:
                - int
                - fromtimestampms
    mapping:
    - key: historic_rates_open
      path:
      - data
      - open
      type:
      - str
      - float
    - key: historic_rates_high
      path:
      - data
      - high
      type:
      - str
      - float
    - key: historic_rates_low
      path:
      - data
      - low
      type:
      - str
      - float
    - key: historic_rates_close
      path:
      - data
      - close
      type:
      - str
      - float
    - key: historic_rates_volume
      path:
      - data
      - volume
      type:
      - str
      - float
    - key: historic_rates_time
      path:
      - data
      - period
      type:
      - int
      - fromtimestampms
