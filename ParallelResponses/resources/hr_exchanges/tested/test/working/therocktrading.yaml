name: therocktrading
terms:
  terms_url: https://www.therocktrading.com/en/service_terms/3
  permission: true
  search_targets:
  - tag: div
    class: service_term_content
api_url: https://api.therocktrading.com/v1/
rate_limit:
  max: 10
  unit: 1
requests:
  currencies:
    request:
      template: currencies/
      pair_template: null
      params: null
    response:
      type: dict
      values:
        currencies:
          type: list
          values:
            type: dict
            values:
              symbol: # e.g. BTC
                type: str
              common_name: # e.g. Bitcoin
                type: str
              decimals:
                type: int
    mapping:
    - key: currency_symbol
      path:
      - currencies
      - symbol
      type:
      - str
    - key: currency_name
      path:
      - currencies
      - common_name
      type:
      - str

  currency_pairs:
    request:
      template: funds/
      pair_template: null
      params: null
    response:
      type: dict
      values:
        funds:
          type: list
          values:
            type: dict
            values:
              id: # e.g. BTCEUR
                type: str
              description:
                type: str
              type:
                type: str
              base_currency: # e.g. EUR
                type: str
              trade_currency: # e.g. BTC
                type: str
              buy_fee:
                type: float
              sell_fee:
                type: float
              minimum_price_offer:
                type: float
              minimum_quantity_offer:
                type: float
              base_currency_decimals:
                type: int
              trade_currency_decimals:
                type: int
              leverages:
                type: list
                values:
                  0:
                    type: float
                  1:
                    type: float
                  2:
                    type: float
                  3:
                    type: float
    mapping:
    - key: currency_pair_first
      path:
      - funds
      - trade_currency
      type:
      - str
    - key: currency_pair_second
      path:
      - funds
      - base_currency
      type:
      - str

  historic_rates:
    request:
      template: funds/{currency_pair}/ohlc_statistics
      pair_template: # e.g. BTCEUR
        template: "{first}{second}"
        lower_case: false
      params:
        period:
          type: int
          default: 15
        before:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S%Z"
          default: ""
#          now
        after:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S%Z"
          default: ""
#          one day behind "before"
        sort:
          type: str
          allowed:
          - ASC
          - DESC
          default: DESC
    response:
      type: list
      values:
        type: dict
        values:
          fund_id:
            type: str
          high:
            type: float
          low:
            type: float
          open:
            type: float
          close:
            type: float
          average:
            type: float
          weighted_average:
            type: float
          base_volume:
            type: float
          traded_volume:
            type: float
          interval_starts_at:
            type:
            - str
            - strptime
            - "%Y-%m-%dT%H:%M:%S.%fZ"
          interval_ends_at:
            type:
            - str
            - strptime
            - "%Y-%m-%dT%H:%M:%S.%fZ"
    mapping:
    - key: historic_rates_high
      path:
      - high
      type:
      - float
    - key: historic_rates_low
      path:
      - low
      type:
      - float
    - key: historic_rates_open
      path:
      - open
      type:
      - float
    - key: historic_rates_close
      path:
      - close
      type:
      - float
    - key: historic_rates_weighted_average
      path:
      - weighted_average
      type:
      - float
    - key: historic_rates_volume
      path:
      - "?"
      type:
      - float
    - key: historic_rates_time
      path:
      - interval_ends_at
      type:
      - str
      - strptime
      - "%Y-%m-%dT%H:%M:%S.%fZ"

  order_book:
    request:
      template: funds/{currency_pair}/orderbook/
      pair_template: # e.g. BTCEUR
        template: "{first}{second}"
        lower_case: false
      params: null
    response:
      type: dict
      values:
        fund_id:
          type: str
        date:
          type:
          - str
          - strptime
          - "%Y-%m-%dT%H:%M:%S.%f"
        asks:
          type: list
          values:
            type: dict
            values:
              price:
                type: float
              amount:
                type: float
        bids:
          type: list
          values:
            type: dict
            values:
              price:
                type: float
              amount:
                type: float
    mapping:
    - key: order_book_time
      path:
      - date
      type:
      - str
      - strptime
      - "%Y-%m-%dT%H:%M:%S.%f"
    - key: order_book_asks_price
      path:
      - asks
      - price
      type:
      - float
    - key: order_book_asks_size
      path:
      - asks
      - amount
      type:
      - float
    - key: order_book_bids_price
      path:
      - bids
      - price
      type:
      - float
    - key: order_book_bids_size
      path:
      - bids
      - amount
      type:
      - float

  ticker:
    request:
      template: funds/tickers/
      pair_template: null
      params: null
    response:
      type: dict
      values:
        tickers:
          type: list
          values:
            type: dict
            values:
              fund_id: # e.g. BTCEUR
                type: str
              date:
                type:
                - str
                - strptime
                - "%Y-%m-%dT%H:%M:%S.%f"
              bid:
                type: float
              ask:
                type: float
              last:
                type: float
              volume:
                type: float
              volume_traded:
                type: float
              open:
                type: float
              high:
                type: float
              low:
                type: float
              close:
                type: float
    mapping:
    - key: currency_pair_first
      path:
      - tickers
      - fund_id
      - 0
      type:
      - str
      - split
      - ""
    - key: currency_pair_second
      path:
      - tickers
      - fund_id
      - 1
      type:
      - str
      - split
      - ""
    - key: ticker_time
      path:
      - tickers
      - date
      type:
      - str
      - strptime
      - "%Y-%m-%dT%H:%M:%S.%f"
    - key: ticker_best_bid
      path:
      - tickers
      - bid
      type:
      - float
    - key: ticker_best_ask
      path:
      - tickers
      - ask
      type:
      - float
    - key: ticker_last_price
      path:
      - tickers
      - last
      type:
      - float
    - key: ticker_daily_volume
      path:
      - tickers
      - volume
      type:
      - float

  trades:
    request:
      template: funds/{currency_pair}/trades
      pair_template: # e.g. BTCEUR
        template: "{first}{second}"
        lower_case: false
      params:
        trade_id: # get all trades starting from a specific trade_id
          type: int
          required: false
        per_page:
          type: int
          max: 200
          default: 25
        page:
          type: int
          default: 1
        after:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S%Z"
          required: false
        before:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S%Z"
          required: false
        order:
          type: str
          allowed:
          - ASC
          - DESC
          default: DESC
    response:
      type: dict
      values:
        trades:
          type: list
          values:
            type: dict
            values:
              id:
                type: int
              fund_id:
                type: str
              amount:
                type: float
              price:
                type: float
              side:
                type: str
              dark:
                type: bool
              date:
                type:
                - str
                - strptime
                - "%Y-%m-%dT%H:%M:%S.%fZ"
        meta:
          type: dict
          values:
            total_count:
              type: int
            first:
              type: dict
              values:
                href:
                  type: str
            previous:
              type: dict
              values:
                href:
                  type: str
            current:
              type: dict
              values:
                href:
                  type: str
            next:
              type: dict
              values:
                href:
                  type: str
            last:
              type: dict
              values:
                href:
                  type: str
    mapping:
    - key: trade_amount
      path:
      - amount
      type:
      - float
    - key: trade_last_price
      path:
      - price
      type:
      - float
    - key: trade_side
      path:
      - side
      type:
      - str
    - key: trade_time
      path:
      - date
      type:
      - str
      - strptime
      - "%Y-%m-%dT%H:%M:%S.%fZ"
