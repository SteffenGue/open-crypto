name: bitmex
terms:
  terms_url: https://www.bitmex.com/app/terms
  permission: null
  search_targets:
  - tag: div
    class: body
  - tag: div
    class: staticContent terms
api_url: https://www.bitmex.com/api/v1/
rate_limit:
  max: 150 # 300 when logged in
  # 5 minutes
  unit: 300
requests:
  order_book: # not required
    request:
      template: orderBook/L2
      pair_template:
        template: "{first}"
        lower_case: false
        alias: symbol
      params:
        depth: # Orderbook depth per side. Send 0 for full depth.
          type: int
          default: 25
    response:
      type: list
      values:
        type: dict
        values:
          symbol:
            type: str
          id:
            type: long
          side:
            type: str
          size:
            type: int
          price:
            type: float
    mapping: null

  trades:
    request:
      template: trade
      pair_template:
        template: "{first}"
        lower_case: false
        alias: symbol
      params:
        filter: # Generic table filter. Send JSON key/values pairs, such as {"key": "values"}
          type: str
          required: false
        columns: # Array of column names to fetch. If omitted, will return all columns.
          type: str
          required: false
        count:
          type: int
          default: 100
        start:
          type: int
          required: false
        reverse: # If true, will sort results newest first.
          type: bool
          default: false
        startTime:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S.%fZ"
          required: false
        endTime:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S.%fZ"
          required: false
    response:
      type: list
      values:
        type: dict
        values:
          timestamp:
            type:
            - str
            - strptime
            - "%Y-%m-%dT%H:%M:%S.%fZ"
          symbol:
            type: str
          side:
            type: str
          size:
            type: int
          price:
            type: float
          tickDirection:
            type: str
          trdMatchID:
            type: str
          grossValue:
            type: int
          homeNotional:
            type: float
          foreignNotional:
            type: int
    mapping:
    - key: trade_time
      path:
      - timestamp
      type:
      - str
      - strptime
      - "%Y-%m-%dT%H:%M:%S.%fZ"
    - key: trade_side
      path:
      - side
      type:
      - str
    - key: trade_amount
      path:
      - size
      type:
      - int
    - key: trade_last_price
      path:
      - price
      type:
      - float

  historic_rates:
    request:
      template: trade/bucketed
      pair_template:
        template: "{first}"
        lower_case: false
        alias: symbol
      params:
        binSize: # Time interval to bucket by
          type: str
          allowed:
          - 1m
          - 5m
          - 1h
          - 1d
          required: false
          default: 1d
        partial: # If true, will send in-progress (incomplete) bins for the current time period.
          type: bool
          default: false
        filter: # Generic table filter. Send JSON key/value pairs, such as {"key": "value"}
          type: str
          required: false
        columns: # Array of column names to fetch. If omitted, will return all columns.
          type: str
          required: false
        count:
          type: int
          required: false
        start:
          type: int
          required: false
        reverse: # If true, will sort results newest first.
          type: boolean
          default: false
        startTime:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S.%fZ"
          required: false
        endTime:
          type:
          - datetime
          - strftime
          - "%Y-%m-%dT%H:%M:%S.%fZ"
          required: false
    response:
      type: list
      value:
        type: dict
        value:
          timestamp:
            type:
            - str
            - strptime
            - "%Y-%m-%dT%H:%M:%S.%fZ"
          symbol:
            type: str
          open:
            type: float
          high:
            type: float
          low:
            type: float
          close:
            type: float
          trades:
            type: int
          volume:
            type: int
          vwap:
            type: float
          lastSize:
            type: int
          turnover:
            type: long
          homeNotional:
            type: float
          foreignNotional:
            type: float
    mapping:
    - key: historic_rates_time
      path:
      - timestamp
      type:
      - str
      - strptime
      - "%Y-%m-%dT%H:%M:%S.%fZ"
    - key: historic_rates_open
      path:
      - open
      type:
      - float
    - key: historic_rates_high
      path:
      - high
      type:
      - high
    - key: historic_rates_low
      path:
      - low
      type:
      - float
    - key: historic_rates_close
      path:
      - close
      type:
      - float
    - key: historic_rates_volume
      path:
      - volume
      type:
      - int
