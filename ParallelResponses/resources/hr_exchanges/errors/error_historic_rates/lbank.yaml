#yaml loader in utilities kann die datei nicht öffnen, wahrscheinlich formatierungsfehler, also irgendwo zu viel/zu wenig eingerückt
name: lbank
terms:
  terms_url: https://lbankinfo.zendesk.com/hc/zh-cn/articles/115002292673-%E6%9C%8D%E5%8A%A1%E5%8D%8F%E8%AE%AE
  permission: true
  search_targets:
  - tag: div
    class: article-container
  - tag: article
    class: article
  - tag: div
    class: article-body
api_url: https://api.lbkex.com/v2/
rate_limit: null
requests:
  ticker:
    request:
      template: ticker.do
      pair_template: null # e.g. eth_btc
      params:
        symbol:
          type: str
          default: all
    response:
      type: list
      values:
        type: dict
        values:
          symbol:
            type: str
          ticker:
            type: dict
            values:
              change:
                type: float
              high:
                type: float
              latest:
                type: float
              low:
                type: float
              turnover:
                type: float
              vol:
                type: float
          timestamp:
            type:
            - int
    mapping:
    - key: ticker_time
      path:
      - []
      type:
      - none
      - now
    - key: currency_pair_first
      path:
      - symbol
      type:
      - str
      - splitupper
      - "_"
      - 0
    - key: currency_pair_second
      path:
      - symbol
      type:
      - str
      - splitupper
      - "_"
      - 1
    - key: ticker_last_price
      path:
      - ticker
      - latest
      type:
      - float
    - key: ticker_daily_volume
      path:
      - ticker
      - vol
      type:
      - float

  currency_pairs:
    request:
        template: currencyPairs.do
        pair_template: null
        params: null
      response:
        type: list
        values: # each available currency pair e.g. "bcc_eth","etc_btc"...
          type: str
      mapping:
      - key: currency_pair_first
        path:
        - 0
        type:
        - str
        - split
        - "_"
      - key: currency_pair_second
        path:
        - 1
        type:
        - str
        - split
        - "_"


  historic_rates:
    request:
      template: kline.do
      pair_template: # e.g. eth_btc
        template: "{first}_{second}"
        lower_case: true
        alias: symbol
      params:
        size:
          type: int
          min: 1
          max: 2880
          default: 2880
        type:
          type: str
          allowed:
            - minute1
            - minute5
            - minute15
            - minute30
            - hour1
            - hour4
            - hour8
            - hour12
            - day1
            - week1
          default: day1
        time:
          type: int
          default: 1325432318 #01.01.2013
    response:
      type: list
      values:
        type: list
        values:
          0: # timestamp
            type:
              - int
              - fromtimestamp
          1: # open
            type: float
          2: # high
            type: float
          3: # low
            type: float
          4: # close
            type: float
          5: # volume
            type: float
    mapping:
      - key: historic_rates_time
        path:
          - 0
        type:
          - int
          - fromtimestamp
      - key: historic_rates_open
        path:
          - 1
        type:
          - float
      - key: historic_rates_high
        path:
          - 2
        type:
          - float
      - key: historic_rates_low
        path:
          - 3
        type:
          - float
      - key: historic_rates_close
        path:
          - 4
        type:
          - float
      - key: historic_rates_volume
        path:
          - 5
        type:
          - float
#   order_book:
#     request:
#       template: depth.do
#       pair_template: # e.g. eth_btc
#         template: "{first}_{second}"
#         lower_case: true
#         alias: symbol
#       params:
#         size:
#           type: int
#           min: 1
#           max: 60
#           default: 60
#         merge:
#           type: int
#           allowed:
#           - 0
#           - 1
#           default: 0
#     response:
#       type: dict
#       values:
#         asks:
#           type: list
#           values:
#             type: list
#             values:
#               0: # price
#                 type: float
#               1: # size
#                 type: float
#         bids:
#           type: list
#           values:
#             type: list
#             values:
#               0: # price
#                 type: float
#               1: # size
#                 type: float
#     mapping:
#     - key: order_book_time
#       path: []
#       type:
#       - none
#       - now
#     - key: order_book_asks_price
#       path:
#       - asks
#       - 0
#       type:
#       - float
#     - key: order_book_asks_size
#       path:
#       - asks
#       - 1
#       type:
#       - float
#     - key: order_book_bids_price
#       path:
#       - bids
#       - 0
#       type:
#       - float
#     - key: order_book_bids_size
#       path:
#       - bids
#       - 1
#       type:
#       - float
#
#   trades:
#     request:
#       template: trades.do
#       pair_template: # e.g. eth_btc
#         template: "{first}_{second}"
#         lower_case: true
#         alias: symbol
#       params:
#         size:
#           type: int
#           min: 1
#           max: 600
#           default: 600
#         time:
#           type:
#           - datetime
#           - totimestamp
#           required: false
#     response:
#       type: list
#       values:
#         type: dict
#         values:
#           date_ms:
#             type:
#             - int
#             - fromtimestamp
#           amount:
#             type: float
#           price:
#             type: float
#           type:
#             type: str
#           tid:
#             type: str
#     mapping:
#     - key: trade_time
#       path:
#       - date_ms
#       type:
#       - int
#       - fromtimestamp
#     - key: trade_amount
#       path:
#       - amount
#       type:
#       - float
#     - key: trade_last_price
#       path:
#       - price
#       type:
#       - float
#     - key: trade_side
#       path:
#       - type
#       type:
#       - str
