name: bitbank
terms:
  terms_url: https://bitbank.cc/about/tos/bitbankcc/
  permission: true
  search_targets:
  - tag: div
    class: container-inner
  - tag: div
    class: row
  - tag: div
    class: col-sm-8
api_url: https://public.bitbank.cc/
rate_limit: null
requests:
  ticker:
    request:
      template: "{currency_pair}/ticker"
      pair_template: # btc_jpy, xrp_jpy, ltc_btc, eth_btc, mona_jpy, mona_btc, bcc_jpy, bcc_btc
        template: "{first}_{second}"
        lower_case: true
      params: null
    response:
      type: dict
      values:
        success:
          type: int
        data:
          type: dict
          values:
            sell:
              type:
              - str
              - float
            buy:
              type:
              - str
              - float
            high:
              type:
              - str
              - float
            low:
              type:
              - str
              - float
            last:
              type:
              - str
              - float
            vol:
              type:
              - str
              - float
            timestamp:
              type:
              - int
    mapping:
    - key: ticker_best_ask
      path:
      - data
      - sell
      type:
      - str
      - float
    - key: ticker_best_bid
      path:
      - data
      - buy
      type:
      - str
      - float
    - key: ticker_last_price
      path:
      - data
      - last
      type:
      - str
      - float
    - key: ticker_daily_volume
      path:
      - data
      - vol
      type:
      - str
      - float
    - key: ticker_time
      path:
      - data
      - timestamp
      type:
      - int
      - fromtimestampms

  # order_book:
    # request:
      # template: "{currency_pair}/depth"
      # pair_template:
        # template: "{first}_{second}"
        # lower_case: true
      # params: null
    # response:
      # type: dict
      # values:
        # success:
          # type: int
        # data:
          # type: dict
          # values:
            # asks:
              # type: list
              # values:
                # type: list
                # values:
                  # 0: # price
                    # type:
                    # - str
                    # - float
                  # 1: #amount
                    # type:
                    # - str
                    # - float
            # bids:
              # type: list
              # values:
                # type: list
                # values:
                  # 0: # price
                    # type:
                    # - str
                    # - float
                  # 1: #amount
                    # type:
                    # - str
                    # - float
    # mapping:
    # - key: order_book_time
      # path: []
      # type:
      # - none
      # - now
    # - key: order_book_asks_price
      # path:
      # - data
      # - asks
      # - 0
      # type:
      # - str
      # - float
    # - key: order_book_asks_size
      # path:
      # - data
      # - asks
      # - 1
      # type:
      # - str
      # - float
    # - key: order_book_bids_price
      # path:
      # - data
      # - bids
      # - 0
      # type:
      # - str
      # - float
    # - key: order_book_bids_size
      # path:
      # - data
      # - bids
      # - 1
      # type:
      # - str
      # - float

#  trades:
#    request:
#      template: "{currency_pair}/transactions"
#      pair_template:
#        template: "{first}_{second}"
#        lower_case: true
#      params: null
#    response:
#      type: dict
#      values:
#        success:
#          type: int
#        data:
#          type: dict
#          values:
#            transactions:
#              type: list
#              values:
#                type: dict
#                values:
#                  transaction_id:
#                    type: int
#                  side:
#                    type: str
#                  price:
#                    type:
#                    - str
#                    - float
#                  amount:
#                    type:
#                    - str
#                    - float
#                  executed_at:
#                    type:
#                    - int
#    mapping:
#    - key: trade_side
#      path:
#      - data
#      - transactions
#      - side
#      type:
#      - str
#    - key: trade_last_price
#      path:
#      - data
#      - transactions
#      - price
#      type:
#      - str
#      - float
#    - key: trade_amount
#      path:
#      - data
#      - transactions
#      - amount
#      type:
#      - str
#      - float
#    - key: trade_time
#      path:
#      - data
#      - transactions
#      - executed_at
#      type:
#      - int
#      - fromtimestampms

  historic_rates:
    request:
      template: "{currency_pair}/candlestick/{candle_type}/{time}"
      pair_template:
        template: "{first}_{second}"
        lower_case: true
      params:
        candle_type:
          type: str
          allowed:
          - 1min
          - 5min
          - 15min
          - 30min
          - 1hour
          - 4hour
          - 8hour
          - 12hour
          - 1day
          - 1week
          default: 1d
        time:
          type:
          - datetime
          - strftime
          - "%Y%m%d" # alternatively "%Y"
          default: 2019 ##gives 1 Year of Data with the specified frequency##
    response:
      type: dict
      values:
        success:
          type: int
        data:
          type: dict
          values:
            candlestick:
              type: list
              values:
                type: dict
                values:
                  type:
                    type: str
                  ohlcv:
                    type: list
                    values:
                      type: list
                      values:
                        0: # open
                          type:
                          - str
                          - float
                        1: # high
                          type:
                          - str
                          - float
                        2: # low
                          type:
                          - str
                          - float
                        3: # close
                          type:
                          - str
                          - float
                        4: # volume
                          type:
                          - str
                          - float
                        5: # unixtime
                          type:
                          - str

    mapping:
    - key: historic_rates_open
      path:
      - data
      - candlestick
      - ohlcv
      - 0
      type:
      - str
      - float
    - key: historic_rates_high
      path:
      - data
      - candlestick
      - ohlcv
      - 1
      type:
      - str
      - float
    - key: historic_rates_low
      path:
      - data
      - candlestick
      - ohlcv
      - 2
      type:
      - str
      - float
    - key: historic_rates_close
      path:
      - data
      - candlestick
      - ohlcv
      - 3
      type:
      - str
      - float
    - key: historic_rates_volume
      path:
      - data
      - candlestick
      - ohlcv
      - 4
      type:
      - str
      - float
    - key: historic_rates_time
      path:
      - data
      - candlestick
      - ohlcv
      - 5
      type:
      - str
      - int
      - fromtimestamp
