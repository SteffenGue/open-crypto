name: zbg
terms: null

api_url: https://kline.zbg.com/api/data/v1/

rate_limit: 
  max: 1000
  unit: 60

requests:
  ticker:
    request: 
      template: tickers
      pair_template: null
      params: 
        isUseMarketName:
          type: str
          default: true
    response:
      type: dict
      values:
        resMsg:
          type: dict
          values:
            code:
              type: str
            method:
              type: bool
            message:
              type: str
      datas:
        type: dict
        values:
          currency_pair:
            type: list
            values:
              0: #marketId
                type: str
              1: #last price
                type: str
              2: #highest price
                type: str        
              3: #lowest
                type: str              
              4: #24h volume
                type: str
              5: #24h change
                type: str             
              6: #
                type: str             
              7: #top buying price
                type: str             
              8: #top selling price
                type: str             
              9:  #24h volume in unit of buyers currency
                type: str             
    mapping:
    - key: ticker_time
      path: []
      type:
      - none
      - now
    - key: currency_pair_first
      path: 
      - datas
      - list_key
      type:
      - str
      - split
      - "_"
      - 0
    - key: currency_pair_second
      path:
      - datas
      - list_key
      type:
      - str
      - split
      - "_"
      - 1
    - key: ticker_last_price
      path:
      - datas
      - list_values
      - 1
      type: 
      - str
      - float
    - key: ticker_daily_volume
      path:
      - datas
      - list_values
      - 4
      type: 
      - str
      - float

  historic_rates:
    request:
      template: klines
      pair_template: 
        template: "{first}_{second}"
        lower_case: false
        alias: marketName
      params:
        type:
          type: str
          default: 1D
        dataSize:
          type: int
          default: 100 #max!
          
    response:
      type: dict
      values:
        datas:
          type: list
          values:
            type: list
            values:
              0: #data type
                type: str
              1: #market id
                type: str        
              2: # market name
                type: str
              3: #timestamp
                type: str
              4: #open
                type: str
              5: #highest
                type: str
              6: #lowest
                type: str
              7: #close
                type: str
              8: #volume
                type: str
              9: #change
                type: str                
              10: #USD exchange rate
                type: str                
              11: #k-lin cycle
                type: str                
              12: #converted
                type: str                
              13: #volume in units of buyers currency
                type: str                
    mapping:
    - key: historic_rates_time
      path:
      - datas
      - []
      - 3
      type:
      - str
      - int
      - fromtimestamp
    - key: historic_rates_low
      path:
      - datas
      - []
      - 6
      type:
      - str
      - float
    - key: historic_rates_high
      path:
      - datas
      - []
      - 5
      type:
      - str
      - float                
    - key: historic_rates_open
      path:
      - datas
      - []
      - 4
      type:
      - str
      - float                
    - key: historic_rates_close
      path:
      - datas
      - []
      - 7
      type:
      - str
      - float                
    - key: historic_rates_volume
      path:
      - datas
      - []
      - 8
      type:
      - str
      - float                