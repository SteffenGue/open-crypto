name: bisq
exchange: true
api_url: https://bisq.markets/api/
rate_limit: null
requests:
  currency_pairs:
    request:
      template: markets/
      pair_template: null
      params: null
    response:
      type: dict
      values:
        currency_pairs: # variable keys; each available currency pair
          type: dict
          values:
            pair: # e.g. 1cr_btc
              type: str
            lname:
              type: str
            rname:
              type: str
            lsymbol:
              type: str
            rsymbol:
              type: str
            lprecision:
              type: int
            rprecision:
              type: int
            ltype:
              type: str
            rtype:
              type: str
            name:
              type: str
    mapping:
    - key: currency_pair_first
      path:
      - dict_values
      - lsymbol
      type:
      - str
    - key: currency_pair_second
      path:
      - dict_values
      - rsymbol
      type:
      - str

  order_books:
    request:
      template: depth
      pair_template: # e.g. 1cr_btc
        template: "{first}_{second}"
        lower_case: true
        alias: market
      params:
        format:
          type: str
    response:
      type: dict
      values:
        currency_pairs: # variable key
          type: dict # is empty list when lack of values
          values:
            buys:
              type: list
              values: # open offer prices
                type:
                  - str
                  - float
            sells:
              type: list
              values: # open offer prices
                type:
                  - str
                  - float
    mapping:
    - key: time
      path: []
      type:
      - none
      - now
    - key: id
      path: []
      type:
        - none
        - now_timestamp
    - key: position
      path: []
      type:
        - none
        - range
    - key: bids_price
      path:
      - dict_values
      - buys
      type:
      - str
      - float
    - key: asks_price
      path:
      - dict_values
      - sells
      type:
      - str
      - float

  historic_rates:
    request:
      template: hloc
      pair_template: # e.g. 1cr_btc
        template: "{first}_{second}"
        lower_case: true
        alias: market
      params:
        interval:
          type: str
          allowed:
#            minutes: minute #Minute is useless, periods are actually several hours
            hours: hour
            days: day
            weeks: week
            months: month
          default: day
        timestamp_to:
          function: last_timestamp
          type:
            - datetime
            - timestamp
        timestamp_from: # returns everything from 01.01.2016 by default.
          function: last_timestamp
          type:
            - datetime
            - timedelta
            - interval
            - 1000
    response:
      type: list
      values:
        type: dict
        values:
          period_start:
            type:
            - int
          open:
            type:
            - str
            - float
          high:
            type:
            - str
            - float
          low:
            type:
            - str
            - float
          close:
            type:
            - str
            - float
          volume_left:
            type:
            - str
            - float
          volume_right:
            type:
            - str
            - float
          avg:
            type:
            - str
            - float
    mapping:
    - key: time
      path:
      - period_start
      type:
      - float
      - from_timestamp
      - 0
    - key: open
      path:
      - open
      type:
      - str
      - float
    - key: high
      path:
      - high
      type:
      - str
      - float
    - key: low
      path:
      - low
      type:
      - str
      - float
    - key: close
      path:
      - close
      type:
      - str
      - float

  tickers:
    request:
      template: ticker
      pair_template:
        template: '{first}_{second}'
        lower_case: False
        alias: market
      params:
        format:
          type: str
          default: jsonpretty
    response:
      type: dict
      values:
        last:
          type:
          - str
          - float
        high:
          type:
          - str
          - float
        low:
          type:
          - str
          - float
        volume_left:
          type: str
        volume_right:
          type: str
        buy:
          type:
          - str
        sell:
          type:
          - str
    mapping:
      - key: best_ask
        path:
          - sell
        type:
          - str
          - float
      - key: best_bid
        path:
          - buy
        type:
          - str
          - float
      - key: time
        path: []
        type:
        - none
        - now
      - key: last_price
        path:
          - last
        type:
          - str
          - float
      - key: daily_volume
        path:
          - volume_left
        type:
          - str
          - float

  trades:
    request:
      template: trades
      pair_template: # e.g. 1cr_btc
        template: "{first}_{second}"
        lower_case: true
        alias: market
      params:
        format:
          type: str
          default: jsonpretty
        timestamp_from: # start time, in seconds since 1970
          default: 2016-01-01
        timestamp_to: # end time, in seconds since 1970
          # type:
          default: now
        trade_id_from: # identifies first trade to include
          type: str
          required: false
        trade_id_to: # identifies last trade to include
          type: str
          required: false
        direction: # trade direction: buy or sell. omit or leave null for both.
          type: str
          required: false
        limit:
          type: int
          max: 2000
          default: 100
        sort:
          type: str
          default: desc
    response:
      type: list
      values:
        type: dict
        values:
          direction:
            type: str
          price:
            type:
            - str
            - float
          amount:
            type:
            - str
            - float
          volume:
            type:
            - str
            - float
          payment_method:
            type: str
          trade_id:
            type: str
          trade_date: # in milliseconds since 1970
            type:
            - int
    mapping:
    - key: id
      path:
        - trade_date
      type:
        - int
    - key: direction
      path:
      - direction
      type:
      - str
    - key: price
      path:
      - price
      type:
      - str
      - float
    - key: amount
      path:
      - amount
      type:
      - str
      - float
    - key: time
      path:
      - trade_date
      type:
      - float
      - from_timestamp
      - 1
