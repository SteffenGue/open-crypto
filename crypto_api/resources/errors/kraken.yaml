#Bei historic rates sind 4 currency_pairs nicht auf dem markt vorhanden? -> Error-Response
name: kraken
exchange: true

api_url: https://api.kraken.com/0/public/
rate_limit:
  max: 1
  unit: 3
requests:
  currency_pairs:
    request:
      template: AssetPairs
      pair_template: # e.g. BCHEUR
        template: "{first}{second}"
        lower_case: false
        alias: pair
      params:
        info:
          default: info
    response:
      type: dict
      values:
        error:
          type: list
        result:
          type: dict
          values:
            currency_pair: # variable key, each available currency pair, e.g. ADACAD
              type: dict
              values:
                altname:
                  type: str
                aclass_base:
                  type: str
                base: # ADA
                  type: str
                aclass_quote:
                  type: str
                quote: # ZCAD
                  type: str
                lot:
                  type: str
                pair_decimals:
                  type: int
                lot_decimals:
                  type: int
                lot_multiplier:
                  type: int
                leverage_buy:
                  type: list
                  values:
                    type: int
                leverage_sell:
                  type: list
                  values:
                    type: int
                fees:
                  type: list
                  values:
                    type: list
                    values:
                      0: # volume
                        type: int
                      1: # percent fee
                        type: int
                fees_maker:
                  type: list
                  values:
                    type: list
                    values:
                      0: # volume
                        type: int
                      1: # percent fee
                        type: int
                fee_volume_currency:
                  type: str
                margin_call:
                  type: int
                margin_stop:
                  type: int
    mapping:
    - key: currency_pair_first
      path:
      - result
      - dict_values
      - wsname
      type:
        - str
        - split
        - '/'
        - 0
    - key: currency_pair_second
      path:
      - result
      - dict_values
      - wsname
      type:
      - str
      - split
      - '/'
      - 1

  tickers:
    request:
      template: Ticker
      pair_template: # e.g. BCHEUR
        template: "{first}{second}"
        lower_case: false
        alias: pair
      params: null
    response:
      type: dict
      values:
        error:
          type: list
        result:
          type: dict
          values:
            currency_pair: # variable key, requested currency pair
              type: dict
              values:
                a: # ask array
                  type: list
                  values:
                    0: # price
                      type:
                      - str
                      - float
                    1: # whole lot volume
                      type:
                      - str
                      - int
                    2: # lot volume
                      type:
                      - str
                      - float
                b: # bid array
                  type: list
                  values:
                    0: # price
                      type:
                      - str
                      - float
                    1: # whole lot volume
                      type:
                      - str
                      - int
                    2: # lot volume
                      type:
                      - str
                      - float
                c: # last trade closed array
                  type: list
                  values:
                    0: # price
                      type:
                      - str
                      - float
                    1: # lot volume
                      type:
                      - str
                      - float
                v: # volume array
                  type: list
                  values:
                    0: # today
                      type:
                      - str
                      - float
                    1: # last 24 hours
                      type:
                      - str
                      - float
                p: # volume weighted average price array
                  type: list
                  values:
                    0: # today
                      type:
                      - str
                      - float
                    1: # last 24 hours
                      type:
                      - str
                      - float
                t: # number of trades array
                  type: list
                  values:
                    0: # today
                      type:
                      - str
                      - int
                    1: # last 24 hours
                      type:
                      - str
                      - int
                l: # low array
                  type: list
                  values:
                    0: # today
                      type:
                      - str
                      - float
                    1: # last 24 hours
                      type:
                      - str
                      - float
                h: # high array
                  type: list
                  values:
                    0: # today
                      type:
                      - str
                      - float
                    1: # last 24 hours
                      type:
                      - str
                      - float
                o: # today's opening price
                  type:
                  - str
                  - float
    mapping:
    - key: time
      path: []
      type:
      - none
      - now
    - key: last_price
      path:
      - result
      - dict_values
      - c
      - 0
      type:
      - str
      - float
    - key: best_ask
      path:
      - result
      - dict_values
      - a
      - 0
      type:
      - str
      - float
    - key: best_bid
      path:
      - result
      - dict_values
      - b
      - 0
      type:
      - str
      - float
    - key: daily_volume
      path:
      - result
      - dict_values
      - v
      - 1
      type:
      - str
      - float

  historic_rates:
    request:
      template: OHLC
      pair_template: # e.g. BCHEUR
        template: "{first}{second}"
        lower_case: false
        alias: pair
      params:
        interval:
          type: int
          allowed:
          - 1
          - 5
          - 15
          - 30
          - 60
          - 240
          - 1440
          - 10080
          - 21600
          default: 1440
        since: # return committed OHLC data since given id (optional.  exclusive)
          type: int
          required: false
    response:
      type: dict
      values:
        error:
          type: list
        result:
          type: dict
          values:
            currency_pair: # variable key, requested currency pair
              type: list
              values:
                type: list
                values:
                  0: # time
                    type:
                    - int
                  1: # open
                    type:
                    - str
                  2: # high
                    type:
                    - str
                  3: # low
                    type:
                    - str
                  4: # close
                    type:
                    - str
                  5: # vwap
                    type:
                    - str
                  6: # volume
                    type:
                    - str
                  7: # count
                    type: int

            last:
              type: int
    mapping:
    - key: time
      path:
      - result
      - currency_pair
      - 0
      type:
      - int
      - utcfromtimestamp
    - key: historic_rates_open
      path:
      - result
      - currency_pair
      - 1
      type:
      - str
      - float
    - key: high
      path:
      - result
      - currency_pair
      - 2
      type:
      - str
      - float
    - key: low
      path:
      - result
      - currency_pair
      - 3
      type:
      - str
      - float
    - key: hclose
      path:
      - result
      - currency_pair
      - 4
      type:
      - str
      - float
    - key: volume
      path:
      - result
      - currency_pair
      - 6
      type:
      - str
      - float

  order_books:
    request:
      template: Depth
      pair_template: # e.g. BCHEUR
        template: "{first}{second}"
        lower_case: false
        alias: pair
      params:
        count:
          type: int
          required: false
    response:
      type: dict
      values:
        error:
          type: list
        result:
          type: dict
          values:
            currency_pair: # variable key, requested currency pair
              type: dict
              values:
                asks:
                  type: list
                  values:
                    type: list
                    values:
                      0: # price
                        type:
                          - str
                      1: # volume
                        type:
                          - str
                      2: # timestamp
                        type:
                        - int
                bids:
                  type: list
                  values:
                    type: list
                    values:
                      0: # price
                        type:
                          - str
                      1: # volume
                        type:
                          - str
                      2: # timestamp
                        type:
                        - int
    mapping:
    - key: time
      path: []
      type:
      - none
      - now
    - key: position
      path: []
      type:
        - none
        - range
    - key: id
      path: []
      type:
        - none
        - now_timestamp
    - key: asks_price
      path:
      - result
      - dict_values
      - asks
      - 0
      type:
      - str
      - float
    - key: asks_amount
      path:
      - result
      - dict_values
      - asks
      - 1
      type:
      - str
      - float
    - key: bids_price
      path:
      - result
      - dict_values
      - bids
      - 0
      type:
      - str
      - float
    - key: bids_amount
      path:
      - result
      - dict_values
      - bids
      - 1
      type:
      - str
      - float

  trades:
    request:
      template: Trades
      pair_template: # e.g. BCHEUR
        template: "{first}{second}"
        lower_case: false
        alias: pair
      params:
        since:
          type: int
          required: false
    response:
      type: dict
      values:
        error:
          type: list
        result:
          type: dict
          values:
            currency_pair: # variable key, requested currency pair
              type: list
              values:
                type: list
                values:
                  0: # price
                    type:
                    - str
                  1: # volume
                    type:
                    - str
                  2: # time
                    type:
                    - int
                  3: # buy/sell
                    type: str
                  4: # market/limit
                    type: str
                  5: # miscellaneous
                    type: str
        last:
          type: int
    mapping:
    - key: time
      path:
      - result
      - currency_pair
      - 2
      type:
      - int
      - utcfromtimestampms
    - key: id
      path:
      - result
      - dict_values
      - 2
      type:
      - int
    - key: direction
      path:
      - result
      - dict_values
      - 3
      type:
      - str
    - key: price
      path:
        - result
        - dict_values
        - 0
      type:
        - str
        - float
    - key: amount
      path:
        - result
        - dict_values
        - 1
      type:
        - str
        - float
